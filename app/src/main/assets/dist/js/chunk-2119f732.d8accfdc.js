(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2119f732"],{"4af3":function(t,e,s){"use strict";s("a5c0")},"5b7c":function(t,e,s){},"5eef":function(t,e,s){"use strict";s("5b7c")},"665a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.detailClass},[s("base-info",{attrs:{"base-info":t.baseInfo},on:{playMusic:t.playMusic}}),s("b-menu",{attrs:{menu:t.list,"active-color":t.getActiveColor},on:{click:t.handleMenuClick}}),s("div",{class:t.program+"detail-container"},[s("song-list",{directives:[{name:"show",rawName:"v-show",value:"music"==t.isShow,expression:"isShow == 'music'"}],ref:"songList",attrs:{"music-list":t.musicList,length:t.length}}),s("div",{directives:[{name:"show",rawName:"v-show",value:"recommend"==t.isShow,expression:"isShow == 'recommend'"}],staticClass:"detail-container-recommend"},[s("recommends",{ref:"recommend",attrs:{recommends:t.recommends,id:t.id}}),s("div",{staticClass:"recommend-bottom"},[s("el-pagination",{attrs:{background:"","current-page":t.offset,"page-size":t.limit,"page-count":50},on:{"update:currentPage":function(e){t.offset=e},"update:current-page":function(e){t.offset=e},"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"current-change":t.onPageChange}})],1)],1),s("music-list-live",{directives:[{name:"show",rawName:"v-show",value:"sub"==t.isShow,expression:"isShow == 'sub'"}],attrs:{subs:t.subs}})],1)],1)},i=[],n=s("f206"),o=(s("6a61"),s("6a93")),c=s("3ce8"),r=s("8b7f"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return Object.keys(t.baseInfo).length?s("div",{staticClass:"base-info"},[s("div",{staticClass:"left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseInfo.img,expression:"baseInfo.img"}],attrs:{alt:""}})]),s("div",{staticClass:"right"},[s("h3",[s("b-tag",{attrs:{color:"var(--main-color)",plain:""}},[t._v("歌单")]),t._v(" "+t._s(t.baseInfo.name)+" ")],1),s("div",{staticClass:"right-item"},[s("b-avatar",{attrs:{src:t.baseInfo.creatorAvatar,size:"30px"}}),s("span",{staticClass:"creator-name"},[t._v(t._s(t.baseInfo.creatorName))]),s("span",[t._v("创建时间："+t._s(t.getCreateDate))])],1),s("div",{staticClass:"right-item"},[s("b-button",{staticClass:"button",style:{border:"none"},attrs:{background:"var(--main-color)",color:"#fff",round:""},on:{click:t.handlePlayMusic}},[s("i",{staticClass:"iconfont icon-bofang"}),t._v("播放全部 ")]),s("b-button",{staticClass:"button",attrs:{round:""}},[s("i",{staticClass:"iconfont icon-shoucang"}),t._v(" 收藏("+t._s(t.baseInfo.subscribedCount)+") ")]),s("b-button",{staticClass:"button",attrs:{round:""}},[s("i",{staticClass:"iconfont icon-fenxiang"}),t._v(" 分享("+t._s(t.baseInfo.shareCount)+") ")])],1),s("div",{staticClass:"desc"},[s("p",[t._v(" 标签： "),s("span",[t._v(t._s(t.getTags))])]),s("p",{staticClass:"desc-title"},[t._v("简介："+t._s(t.baseInfo.title)+"}}")])])]),s("div",{staticClass:"play"},[s("div",{staticClass:"play-left"},[t._v(" 歌曲数 "),s("br"),t._v(" "+t._s(t.baseInfo.trackCount)+" ")]),s("div",{staticClass:"play-right"},[t._v(" 播放数 "),s("br"),t._v(" "+t._s(t.getPlayCount)+" ")])])]):t._e()},l=[],m=(s("ab61"),s("6ce8"),s("e381"),s("8afb"),s("3de1")),d={name:"BaseInfo",props:{baseInfo:{type:Object,default:{}}},computed:{getCreateDate:function(){return Object(m["b"])(new Date(this.baseInfo.createTime),"yyyy-MM-dd")},getTags:function(){return this.baseInfo.tags&&this.baseInfo.tags.join("/")},getPlayCount:function(){return this.baseInfo.playCount&&this.baseInfo.playCount.toString().slice(0,2)+"万"}},methods:{handlePlayMusic:function(){this.$emit("playMusic")}}},f=d,h=(s("8324"),s("5d22")),b=Object(h["a"])(f,u,l,!1,null,"bd0e3784",null),v=b.exports,g=s("d8db"),p=s("b99c"),C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!=t.subs?s("div",{staticClass:"live"},[s("div",{staticClass:"content"},t._l(t.subs,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("img",{attrs:{src:e.avatarUrl,alt:""},on:{load:t.handleImgLoad}}),s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))])])})),0)]):t._e()},w=[],_=s("ca40"),y={name:"MusicListLive",mixins:[_["a"]],props:{subs:{type:Array,default:function(){return[]}}},methods:{handleImgLoad:function(){this.imgCount==this.subs.length&&this.$emit("refresh"),this.imgCount++}}},I=y,k=(s("4af3"),Object(h["a"])(I,C,w,!1,null,"3d645552",null)),j=k.exports,x={name:"MusicListDetail",mixins:[c["a"],r["a"]],components:{BaseInfo:v,SongList:g["a"],Recommends:p["a"],MusicListLive:j},computed:{detailClass:function(){return["".concat(this.program+"detail"),"".concat(this.program+"detail-"+this.theme)]}},data:function(){return{id:null,limit:30,offset:1,list:[],baseInfo:{},musicList:[],isShow:"music",recommends:null,recommendsCount:0,subs:null,length:null}},created:function(){this.getDetailRequestDate()},methods:{onPageChange:function(){var t=this;this.getRecommends(),this.$nextTick((function(){var e=t.$refs.recommend.$el.offsetTop;t.$refs.scroll.scrollTo(e,0),t.handleRefresh()}))},handleMenuClick:function(t){switch(t){case 0:this.isShow="music";break;case 1:this.isShow="recommend";break;case 2:this.isShow="sub"}},init:function(){this.limit=20,this.list=[],this.baseInfo={},this.musicList=[],this.isShow="music",this.recommends=null,this.subs=null},getDetailRequestDate:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a,i,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.id=t.$route.params.id,t.id){e.next=3;break}return e.abrupt("return");case 3:return t.init(),e.next=6,Object(o["b"])(t.id);case 6:for(s=e.sent,t.baseInfo=new o["i"](s.data&&s.data.playlist),t.recommendsCount=s.data.playlist.commentCount,a="评论("+t.recommendsCount+")",t.list=["歌曲列表",a,"收藏者"],i=s.data.playlist.trackIds,t.length=i.length,n=0,c=i.length;n<c;n++)Object(o["e"])(i[n].id).then((function(e){var s=new o["j"](e.data.songs);t.musicList.push(s)}));t.getRecommends(),Object(o["f"])(t.id,30).then((function(e){t.subs=e.data.subscribers}));case 16:case"end":return e.stop()}}),e)})))()},getRecommends:function(){var t=this;Object(o["d"])(this.id,this.limit,this.offset).then((function(e){t.recommends=e.data.comments}))}},watch:{$route:function(){this.$route.path.indexOf("musiclistdetail")>0&&this.getDetailRequestDate()}}},S=x,L=(s("5eef"),Object(h["a"])(S,a,i,!1,null,"76711872",null));e["default"]=L.exports},7998:function(t,e,s){},8324:function(t,e,s){"use strict";s("7998")},a5c0:function(t,e,s){},ab61:function(t,e,s){"use strict";var a=s("1294"),i=s("c5e3"),n=s("c209"),o=s("e731"),c=[].join,r=i!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:r||!u},{join:function(t){return c.call(n(this),void 0===t?",":t)}})}}]);
//# sourceMappingURL=chunk-2119f732.d8accfdc.js.map